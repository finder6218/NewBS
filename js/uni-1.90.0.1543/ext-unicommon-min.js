/*!
 * uniGUI Library extension for Sencha Ext JS
 * by Farshad Mohajeri  
 * Copyright(c) 2009-2020 FMSoft Inc.
 * info@fmsoft.net
 * http://www.unigui.com
 * http://www.fmsoft.net 
!*/
var uniVars={mKeys:{},gNavigate:{},_docKeys_:{},_actFrm_:null,_mFrm_:null,_actPge_:{Id1:"",Id2:""},_maskObjs:[],_maskCnt:0,_actCnt:null,_extVer:null,_dlfrmarr:[],_dlfrmid:0,_loginFrm:null,_vport:null,_maskScrollable:false,_timers:{},_auxForms:[]},uniWhiteMask={ldMask:true,maskUseMsg:false,maskAttribs:{color:"#fff",opacity:0.3}};function _dts_(b,c){if(b&&b.getDate){if(c){var a=Ext.Date;b=a.utcToLocal(b)}return(Ext.Date.format(b,"YmdHis"))}else{return("")}}function _ts_(a){if(a&&a.getDate){return(Ext.Date.format(a,"H:i:s"))}else{return(a)}}function _xl_(a){var b=encodeURIComponent;if(a==undefined||a===null){a=""}if(a&&a.getDate){return("\3d\3"+_dts_(a))}if(typeof a=="boolean"){return("\3b\3"+b(a))}return(b(a))}function _ds_(a){if(a&&a.getDate){return(Ext.Date.format(a,"Ymd"))}else{return("")}}function _ueval(ss){eval(ss)}function hexToRGB(f,h){var d=parseInt(f.slice(1,3),16),c=parseInt(f.slice(3,5),16),a=parseInt(f.slice(5,7),16);if(h){return"rgba("+d+", "+c+", "+a+", "+h+")"}else{return"rgb("+d+", "+c+", "+a+")"}}function applyAttribs(a,b){if(a&&a.dom&&b.uniAttribs){a.dom.style.backgroundColor=hexToRGB(b.uniAttribs.color,b.uniAttribs.opacity)}}Ext.override(Ext.LoadMask,{onRender:function(){this.callParent(arguments);var a=this.maskEl;applyAttribs(a,this)}});function _pss_(c,b){if(typeof c.shiftKey=="boolean"){var a=0;if(c.shiftKey){a|=1}if(c.altKey){a|=2}if(c.ctrlKey){a|=4}return(a)}else{if(b){return _pss_(b)}}return null}function _xyLcl(a,d,c){var b=d;switch(c){case 0:b-=a.getX();break;case 1:b-=a.getY();break}return b}function _gkc_(b,a){if(b&&b.getKey){return(b.getKey())}if(a&&a.getKey){return(a.getKey())}if(a.browserEvent){return a.browserEvent.keyCode}return null}function _hdmask_(f,c){if(Ext.isObject(f)){if(!f.hasMask){return}if(f.noAutoHide&&c!==true){return}f.noAutoHide=false;if(Ext.isObject(f.activeTargetMask)){if(f.activeTargetMask.destroyed===true){return}}var b=0;if(Ext.isObject(f.UIMask)){if(f.UICnt){b=f.UICnt}if(--b<=0){f.UICnt=0;f.hasMask=false;var a=f.UIMask;if(!a.empty){if(a.mustWaitData!==true){f.maskActive=false;try{a.hide();a.destroy()}catch(d){if(uniSyncObj.debug){_log("_hdmask_: "+d.message)}}}}delete f.UIMask}else{f.UICnt=b}}}}function createMask(a){return null}function _hfm_(b,a){if(b&&b.uniFMask){if(a.e&&b.uniFMask[a.e]){return true}}return false}function _gxv_(a){if(a.getXValue){return(a.getXValue())}return(a.value)}function _shmask_(h,f,j,d){var c="Loading...";var a=null;var b=false;var i=null;if(Ext.isObject(h)){if(Ext.isObject(d)){i=d}else{if(Ext.isObject(h.uniMask)){i=h.uniMask}else{if(h.config&&Ext.isObject(h.config.uniMask)){i=h.config.uniMask}}}if(i&&(i.ldMask||f)){if(typeof i.maskMsg=="string"&&i.maskMsg!=""){c=i.maskMsg}if(!Ext.isNumber(h.UICnt)){h.UICnt=0}h.noAutoHide=j;try{if(h.UICnt++==0){if(typeof i.targetObj=="object"&&i.targetObj){a=i.targetObj}else{if(h.uwindow&&h.uwindow.hidden!==true){a=h.uwindow}else{if(h.uform){a=h.uform}}}if(a){if(a.uform==a){b=true}if(!b&&a.getMaskTarget&&!a.getMaskTarget()){b=true}}try{h.activeTargetMask=a;if(a.isVisible&&a.isVisible()==false){h.UIMask={empty:true}}else{h.UIMask=createMask({useTargetEl:b,target:a,msg:c,uniAttribs:i.maskAttribs,useMsg:i.maskUseMsg});h.UIMask.show()}}catch(g){_log("_shmask_(): "+g)}}}finally{h.hasMask=true;if(i.maskWaitData){uniVars._maskObjs.push({cf:i,c:0,u:h.UIMask})}}}}}function _ssevt_(d,c,a){if(a){d.suspendEvent(c)}else{d.resumeEvent(c)}}function _hreq_(d,a,c){if(d&&d.exEvents){var b=d.exEvents.ajaxrequest;if(b){b(d,a,c)}}}function _hcbk_(c,b){if(c&&c.exEvents){var a=c.exEvents.ajaxcallback;if(a){a(c,b)}}}function _aexc_(a){var b=a.responseText;if(b&&b.substring(0,3)=="@@@"){a.responseText=b.substring(3);return(true)}return(false)}function obj2str(i,f,d,b){var a="",h=encodeURIComponent;if(!d){d="="}if(!b){b="&"}if(Ext.isObject(i)){for(var c in i){a=a+b+h(c)+d;var g=_xl_(i[c]);if(f){a=a+Base64.encode(g)}else{a=a+g}}}if(f){a=Base64.encode(a)}return a}function ajaxRequest(g,f,d,c,b,a,h){return _ajaxRequest_(g,f,d,c,b,a,h)}function ajaxRequestNoParams(f,d,c,b,a,g){return _ajaxRequest_(f,d,c,b,a,true,g)}function ajaxReqEx(c,b,a,d){return _ajaxRequest_(c,b,a,undefined,false,true,d)}function _ajaxRequest_(o,b,g,h,q,n,r){var s="",p=encodeURIComponent,c=h;if(!o){return null}if(!o.owner){return null}if(c==undefined&&uniVars._uniAsync===false){c=false}if(Ext.isObject(g)){s=obj2str(g)}else{if(g&&g.length){var m=g.length;for(var j=0;j<m;j++){s=s+"&"+p(g[j])}}}if(o.getXType&&o.getXType()=="combo"){_asst_(o)}var k="Ajax=1&IsEvent=1&Obj="+o.nm+"&Evt="+b+s;k+=_gv_(o.uform,n);if(c!==false){c=true}var d=o.isXType&&o.isXType("window");if(q&&o.showMask&&!(!d&&o.uniMask&&o.uniMask.ldMask)){o.mevent=b;_shmask_(o,true)}var f=o.owner.ajxS,l=o.owner.ajxF,a=Ext.Ajax.getTimeout();if(r){if(r.success){f=r.success}if(r.failure){l=r.failure}if(r.timeout){a=r.timeout}}return Ext.Ajax.request({url:o.owner.appRoot+"HandleEvent",event:b,params:k,success:f,failure:l,obj:o,timeout:a,async:c})}function _cdo_(g,c,f,b,d){if(b){if(f){if(g){if(!b[g]){b[g]={}}var a=b[g]}else{var a=b}a.owner=b;if(a[f]===undefined){a[f]=c}c.uname=f}else{if(g){c.uname=g;b[g]=c}}c.owner=b;c.uform=b.form;c.uwindow=b.window;if(b.form&&b.window&&!b.window.uform){b.window.uform=b.form;b.window.uwindow=b.window}}else{if(c){_ueval(g+"="+c.nm+";")}else{_ueval(g+"={};")}_ueval(g+'.uname="'+g+'";')}if(c){c.monitorUniEvents=true;c.retfalse={};if(c.uniAfterCreate){c.uniAfterCreate()}if(d){d(c)}}}function _coe_(b,g,h,f,d){var c="On"+f.charAt(0).toUpperCase()+f.substring(1);var a=null;if(g){if(h){a=b[g][h]}else{a=b[g]}}else{if(h){a=b[h]}else{a=b}}if(a.on){a.on(f,d)}a[c]=d}function _coxe_(a,f,g,c,b){if(f){if(g){var d=a[f][g]}else{var d=a[f]}}else{if(g){var d=a[g]}else{var d=a}}if(!d.exEvents){d.exEvents=[]}d.exEvents[c]=b}function _gv_(g,c){var a="&"+_S_ID,f="",b=encodeURIComponent;if(!c){if(g){if(g.getForm){var d=g.getForm()}else{var d=g}f=uniGetValues(d);if(f!=""){f=b(f)}if(Ext.isArray(uniVars._auxForms)){Ext.Array.each(uniVars._auxForms,function(i){var h=uniGetValues(i);if(h!=""){f=f+b(h)}})}if(f!=""){a+="&_fp_="+f}}}return(a)}function _sps_(f,i,g,h,c){if(c&&c.getPosition){var a;try{a=c.getPosition()}catch(d){a=[0,0]}if(i!==null){i+=a[0]}if(g!==null){g+=a[1]}}if(!h&&c){var b=Ext.getViewportHeight();if(f.getHeight()+g>b){g=b-f.getHeight()-5}}if(h){if(i!==null){f.setLeft(i)}if(g!==null){f.setTop(g)}}else{_ssevt_(f,"move",true);try{if(i!==null&&g!==null){if(c){f.setLocalXY(i,g)}else{f.setPosition(i,g)}}else{if(i===null){f.setLocalY(g)}else{if(g===null){f.setLocalX(i)}}}}finally{_ssevt_(f,"move",false)}}}function _ssz_(d,a,b){if(d.getCollapsed){var f=d.getCollapsed();if(f=="left"||f=="right"){if(d.sizeLocked!==true){if(a!=d.getWidth()){d.expand(false)}}}if(f=="top"||f=="bottom"){if(d.sizeLocked!==true){if(b!=d.getHeight()){d.expand(false)}}}}d.setSize(a,b)}function setElPropHelper(k,b,f,o,j,n,l){var d=null;switch(o){case 0:case 1:case 2:case 3:case 4:case 5:if(l){var m=l.split(".");if(m.length>1){d=k[m[0]];if(d){d=d[m[1]]}}else{d=k[l]}if(Ext.isObject(d)&&d.isComponent){d=d.el}}else{if(k.getEl){d=k.getEl()}else{d=k.element}}break;case 6:if(k.getComponent){d=k.getComponent().element}break}if(d){switch(o){case 0:d.setStyle(b,f);break;case 1:d=d.down(j);if(d){d.setStyle(b,f)}break;case 2:if(d.dom){d.dom[b]=f}break;case 3:if(d.dom&&d.dom.style){d.dom.style[b]=f}break;case 4:if(k.setFieldStyle){if(f){k.setFieldStyle(b+":"+f)}else{k.setFieldStyle(b)}}break;case 5:var h=Ext.DomQuery.select(j,d.dom,null,false);if(h&&h.length){for(var g=0;g<h.length;g++){if(Ext.isObject(b)){for(var c in b){if(h[g].style){h[g].style[c]=b[c]}}}}}break;case 6:d=d.down(j);if(d){d=d.dom}if(d){d[b]=f}break}}if(!d&&n!==true){if(k.elArray==undefined){k.elArray=[]}k.elArray.push({prop:b,val:f,mtd:o,cs:j,elname:l})}}Ext.override(Ext.Widget,{setElProp:function(g,f,b,c,d,a){setElPropHelper(this,g,f,b,c,d,a)}});Ext.override(Ext.Base,{getConfig:function(){if(this.destroyed){return null}return this.callParent(arguments)},destroy:function(){var a=this.destroyed;if(!a&&this.manualDestroy===true){return}try{this.uniDestroy()}finally{try{this.callParent(arguments)}finally{if(!a){this.uniCleanup()}}}},uniCleanup:function(){try{if(this.nm){eval("delete "+this.nm+";");if(this===uniVars._actCnt){uniVars._actCnt=null}if(this===uniVars._mFrm_){uniVars._mFrm_=null}if(this===uniVars._actFrm_){uniVars._actFrm_=uniVars._mFrm_}}this.tabItems=null;this.store=null;this.grid=null;this.uform=null;this.uwindow=null;this.owner=null}catch(e){_log(e.message)}},uniEraseFrm:function(){var a;if((a=uniVars._auxForms.indexOf(this))>-1){uniVars._auxForms.splice(a,1)}if((a=uniVars._auxForms.indexOf(this.ownerCt))>-1){uniVars._auxForms.splice(a,1)}},uniDestroy:function(){if(!this.destroyed){this.uniEraseFrm();if(this.uform&&this.uform.tabItems){this.uform.tabItems.remove(this);if(this.uform.activeField===this){this.uform.activeField=null}}if(this.owner){if(this.rootObj){eval("delete "+this.owner.uname+";")}else{if(this.uname){this.owner[this.uname]=null}}}}}});Ext.override(Ext.Component,{destroy:function(){if(!this.destroyed&&this.manualDestroy===true){return}this.callParent(arguments)},constructor:function(a){if(a&&a.beforeinit){a.beforeinit(this,a)}this.callParent([a])},uniAfterCreate:function(){},uniCheckEvent:function(a){if(this.events[a]===true){this.uniHasEvent[a]=true}},setPendingElProps:function(){if(this.elArray){var b=this.elArray;while(b.length>0){e=b.pop();this.setElProp(e.prop,e.val,e.mtd,e.cs,true,e.elname)}}},afterRender:function(){var a=this;a.callParent();a.initUniEvents();a.setPendingElProps()},initUniEvents:function(){},showMaskCfg:function(a,b){if(!this.maskActive){this.maskActive=true;_shmask_(this,true,b,a)}},showMask:function(d,c,b){if(!this.maskActive){this.maskActive=true;var a=this.uniMask;if(!a){a=this.config.uniMask}if(!a){a={}}if(d){a.maskMsg=d;a.maskUseMsg=true}if(c){a.targetObj=c}else{if(this.uform){a.targetObj=this.uform}}_shmask_(this,true,b,a)}},hideMask:function(a){this.maskActive=false;_hdmask_(this,a)},setElProp:function(g,f,b,c,d,a){setElPropHelper(this,g,f,b,c,d,a)},setBodyProp:function(c,b){var a=this.body;if(!a){a=this.bodyElement}if(a){a.setStyle(c,b)}}});var _ajxerr=false;var _showAjaxErr=false;var _ajxflerr="Server unavailable, please try later";function AjaxError(a,b){if(_ajxerr){return}_ajxerr=true;Ext.Msg.show({title:"Ajax Error",multiline:true,value:b,width:400,minWidth:200,msg:a,icon:Ext.Msg.ERROR,buttons:Ext.Msg.OK,fn:function(){_ajxerr=false}})}function parseUploadRes(a){if(a.result){return(a.result.message)}if(Ext.isObject(a.response)){return(JSON.parse(a.response.responseText).message)}if(a.responseText){return(JSON.parse(a.responseText).message)}return("parseUploadRes(): Unknown Error.")}function AjaxSuccess(rs){if(_aexc_(rs)){return}try{eval(rs.responseText)}catch(err){if(_showAjaxErr){AjaxError(err.message,rs.responseText)}else{_log("JS Error: "+err.message)}}}function AjaxFailure(a,b){if(!uniSyncObj.fMode){AjaxError(_ajxflerr,"Error: "+a.statusText+"\x0AStatus: "+a.status)}}function _cunld_(){if(uniVars._mFrm_){ajaxRequest(uniVars._mFrm_,"bclose",[],true,false,true);ajaxRequest(uniVars._mFrm_,"bclose",[],false,false,true)}}function _pd_(a,b){var c=Ext.Date.parse(a,"YmdHis");if(b){c=Ext.Date.localToUtc(c)}return(c)}function _sdl_(g){var a=uniVars._dlfrmarr;var c=a.length;if(c>=5){var b=a[0];a.shift();try{Ext.destroy(b)}catch(f){}}var d=Ext.DomHelper.append(document.body,{tag:"iframe","class":"x-hidden",id:"__uniDlFrame_"+uniVars._dlfrmid++,name:"???????",frameBorder:0,width:0,height:0,css:"display:none;visibility:hidden;height:0px;",src:g},true);a.push(d);return d}function _clat_(){for(var a in uniVars._timers){if(uniVars._timers[a]!=null){try{uniVars._timers[a].uniStop();uniVars._timers[a]=null}catch(b){}}}}function _hed_(b){var a=_gmo_(b);if(a&&a.nm){a.uniBlurChanged=true;if(!a.sendBusy){if(!a.fieldEdited){var c=(a.isXType("datefield")||a.isXType("timefield")||a.isXType("numberfield"));if(!c){if(a.getValue&&a.getValue()===null){return}}a.fieldEdited=true;a.fieldEditBusy=true;try{if(a.readOnly!==true){if(a.uname){_sfc_(a);a.fireEvent("edited",a)}}}finally{a.fieldEditBusy=false}}}}}function _gmo_(a){if(a){if(!a.nm&&a.ownerCt&&a.ownerCt.nm){a=a.ownerCt}}return a}function _ffc_(c,a,b){if(c&&c.uform&&c.uform.uActive===false){return false}if(c&&c.focus){_sfc_(c,true);if(!a){a=false}if(!Ext.isNumber(b)){b=100}c.focus(a,b);return true}return false}function _sfc_(b,a){if((b&&!b.focusDisabled)||a){uniVars._actCnt=b}}function _rfes_(a){a.fieldEdited=false}Ext.define("uniIFrame",{getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},setUrl:function(a){this.lastUrl=a;if(this.iframe){this.iframe.src=a;this.fireEvent("urlchange",this,this.iframe)}},setValue:function(c,a){if(this.docInited){if(a===true){this.getEditorBody().innerHTML=c}else{var b=this.getDoc();b.open();b.writeln(c);b.close()}}else{this.fhtml=c;this.fhtmlOnly=a}},initEditor:function(){this.docInited=true;if(this.fhtml){this.setValue(this.fhtml,this.fhtmlOnly)}},initIFrame:function(c,b){if(this.iframe==undefined){var a=this.ifName;if(!a){a=this.config.ifName}if(a){this.iframe=document.getElementsByName(a)[0];if(this.iframe&&this.lastUrl){this.setUrl(this.lastUrl)}}}if(c&&this.lastUrl){this.fireEvent("frameload",this,b)}}});function nullVarToStr(a){if(a==undefined||a===null){return("")}return(a)}function varEqual(b,a){if(b===a){return true}if(Ext.isNumber(b)||Ext.isNumber(a)){if(b==a){return true}}if(Ext.isDate(b)||Ext.isDate(a)){if(_dts_(b)==_dts_(a)){return true}}if(nullVarToStr(b)==nullVarToStr(a)){return true}return false}function _o2s_(g,c){var d="\4",b="",a,h;if(!Ext.isObject(g)){return(_xl_(g))}for(var f in g){a=g[f];if(c){h=c[f];if(varEqual(a,h)){continue}}a=_xl_(a);if(b!=""){b+=d}b=b+f+"="+a}return"{"+b+"}"}function _r2s_(c){var b="{";if(!Ext.isObject(c)){return(_xl_(c))}if(c.data){var f=c.data;for(var d in f){if(c.isModified(d)){var a=_xl_(f[d]);if(b!="{"){b+=","}b=b+d+":"+a}}}return b+"}"}function getLicOwner(){return(Base64.decode(uniSyncObj.licOwn))}function iframe_load(a){var b=Ext.getCmp(a);if(b){b.initIFrame(true,this)}}function _rno2arr_(b){if(!Ext.isArray(b)){return("")}var a="[";Ext.Array.each(b,function(d){a+=d.data._r+","});a=a.slice(0,-1);a+="]";return(a)}function saveChartImg(i,a,f,g){if(i.chart){var c=i.chart.getImage();if(c){var b=c.data,d=c.type;if(d=="svg"){}else{if(d=="png"){ajaxRequest(i,g,{png:b})}else{_log(d+" is not supported.")}}}}}function setStoreRow(a,h,b,g,f){if(a.getCount&&a.getCount()===0){return}var d=a.getById(h);if(!d){d=a.getById(b)}if(d){d.noEvent=true;try{d.set(g);d.setId(h);d.commit()}finally{d.noEvent=false}}else{if(f){var c="";if(a.grid){c=a.grid.uname}alert("setStoreRow(): Row not found, Id: "+h+" Grid: "+c)}}}function _cnf_(a,f,d,c,b){var g=a.getStore().getNodeById(f);if(g){if(g[d]){g[d](c,b)}}}function toggleNav(d,c,a){var b=d.ownerCt;if(!b){b=d.getParent()}if(c){b.oldWidth=b.getWidth();d.setMicro(true);if(a){b.setWidth(a)}}else{d.setMicro(false);b.setWidth(b.oldWidth)}}Ext.override(Ext.data.ProxyStore,{destroy:function(){var a=this;if(!a.destroyed&&a.uniDeferred!==true){Ext.defer(function(){this.uniDeferred=true;if(!this.destroyed){this.destroy()}},10000,a);return}a.callParent(arguments)},uniApplyId:function(a,c){if(a.length==1&&Ext.isNumber(c)){var b=a[0];b.setId(c)}},uniAdd:function(a){var b=this,d=a.id;var c=b.add(a);b.uniApplyId(c,d);return c},uniInsert:function(b,a){var c=this,f=a.id;var d=c.insert(b,a);c.uniApplyId(d,f);return d}});function resizeCallback(){if(uniVars._loginFrm){ajaxRequest(uniVars._loginFrm,"uresize",{w:window.innerWidth,h:window.innerHeight})}}function addLoginResizeEvent(a){if(window.addEventListener){uniVars._loginFrm=a;window.addEventListener("resize",resizeCallback)}}function _gmf_(d,c){var b={};for(var a in c){b[a]=d.get(a)}return b}function uniDelete(o){if(o){if(o.destroy){o.destroy()}else{if(o.nm){eval("delete "+o.nm+";")}}}}function _injic_(d,c,b){function a(f){var h=f.el.down(c);if(!h){h=Ext.get(c)}if(h){var g=document.createElement("img");g.src=b;h.dom.appendChild(g)}}if(d.rendered){a(d)}else{d.on("afterrender",a,d)}}function fobj2style(g,b,d,f){if(g.fc||g.ft||g.b||g.fts||g.h){var c='"';if(!f){c="style="+c}if(g.w){c+="width:"+g.w+"px;"}if(g.h){c+="height:"+g.h+"px;"}if(g.fc){c+="color:"+g.fc+";"}if(g.ft){c+="font:"+g.ft+";"}if(g.fts){c+=g.fts+";"}if(b!==true){if(g.b){c+="background-color:"+g.b+(d?" !important":"")+";"}}return(c+'"')}return null}function fobj2styleobj(fobj,nobg){if(fobj.fc||fobj.ft||fobj.b||fobj.fts||fobj.h){var a={};if(fobj.w){a.width=fobj.w+"px"}if(fobj.h){a.height=fobj.h+"px"}if(fobj.fc){a.color=fobj.fc}if(fobj.ft){a.font=fobj.ft}if(fobj.fts){try{eval("var ff={"+fobj.fts+"};")}catch(err){var ff=null}if(Ext.isObject(ff)){copyObj(ff,a)}}if(nobg!==true){if(fobj.b){a["background-color"]=fobj.b}}return(a)}return null}function copyObjExclude(g,d,b,f){if(g&&d){for(key in g){if(b[key]){continue}var c=g[key];if(c||!f){d[key]=c}}}}function copyObj(f,c,d){if(f&&c){for(key in f){var b=f[key];if(b||!d){if(Ext.isObject(b)){if(!Ext.isObject(c[key])){c[key]={}}copyObj(b,c[key],d)}else{c[key]=b}}}}}function _rndAxis_(d,b,c,f){if(Ext.isArray(d.cLables)){var a=d.uLastIx;if(f===null){a=0}d.uLastIx=a+1;if(a<d.cLables.length){return d.cLables[a]}}if(d.hideLabel==true){return""}if(Ext.isNumber(b)){return Ext.util.Format.number(b,"#.0")}return b}Ext.override(Ext.Base,{isXType:function(b,a){return false}});if(Ext.ZIndexManager){Ext.override(Ext.ZIndexManager,{privates:{onMaskMousedown:function(a){if(uniVars._maskScrollable){return}if(this.topModal){this.topModal.focus();a.preventDefault()}}}})}Ext.override(Ext,{appUri:null,xR:function(c,d,b,a){return this.xReq(this.appUri,c,d,b,a)},xReq:function(b,d,f,c,a){if(a===undefined){a=true}if(!b){b="/HandleEvent"}d="Ajax=1&IsEvent=1&Obj="+f.nm+"&Evt="+c+"&"+d;return Ext.Ajax.request({url:b,params:d,obj:f,e:c,async:a,success:AjaxSuccess,failure:AjaxFailure})}});Ext.override(Ext.list.Tree,{privates:{onRefresh:function(a){}}});Ext.override(Ext.util.Event,{removeListener:function(fn,scope,index){var nm;if(fn&&fn.nm){nm=fn.nm}try{this.callParent(arguments)}finally{if(nm){try{eval("delete "+nm+";")}catch(e){_log(e.message)}}}}});function submitFile(inp,tout,multi,modern){inp.aborted=false;if(inp.getFiles){var files=inp.getFiles()}else{var files=inp.fileInputEl.dom.files}if(inp.maxFiles&&files.length>inp.maxFiles){Ext.Msg.alert(inp.uploadError,inp.maxFilesError);return}function closeProgress(){if(inp.upBox){inp.upBox.close();delete inp.upBox}}function upload(files,ix){var xhr=new XMLHttpRequest(),formData=new FormData();if(ix===undefined){ix=0}var file=files[ix],numfiles=files.length;if(!file){Ext.Msg.alert(inp.uploadError,inp.uploadNoFile);return}if(inp.maxSize&&file.size>inp.maxSize){Ext.Msg.alert(inp.uploadError,inp.maxSizeError+'.<br>"'+file.name+'"<br>'+file.size+" > "+inp.maxSize+" byte(s)");return}xhr.open("POST",Ext.appUri+"?Evt=upload&IsEvent=1&Obj="+inp.nm+"&fileno="+ix+"&filename="+file.name+"&filetype="+file.type+"&filesize="+file.size+"&"+_S_ID,true);xhr.timeout=tout;xhr.ontimeout=function(){closeProgress();Ext.Msg.alert(inp.uploadError,inp.uploadTimeout)};xhr.upload.onprogress=function(e){if(inp.aborted===true){closeProgress();xhr.abort()}else{if(!inp.upBox){var confObj={buttons:Ext.MessageBox.CANCEL,title:inp.pleaseWait,closable:false,message:file.name,fn:function(buttonId){inp.aborted=true}};if(!modern){confObj.progress=true}inp.upBox=Ext.Msg.show(confObj)}var percent=Math.round((e.loaded/e.total)*100).toString()+"%",msg=((numfiles>1)?"("+ix+"/"+numfiles+") ":"")+file.name;if(!modern){if(inp.upBox.updateProgress){inp.upBox.updateProgress(e.loaded/e.total,percent,msg)}}else{inp.upBox.setMessage("("+percent+") "+msg)}}};xhr.onload=xhr.onerror=function(){var status=this.status;if(status==200){var rsp=this.response,rspobj=null;try{eval("rspobj="+rsp)}catch(e){_log("submitFile(): "+e.message)}if(Ext.isObject(rspobj)){if(rspobj.success===false){closeProgress();Ext.Msg.alert(inp.uploadError,rspobj.message);return}}}else{closeProgress();Ext.Msg.alert(inp.uploadError,"Error Status = "+status);return}var lastFile=(ix==files.length-1);inp.fireEvent("actioncomplete",inp,status,ix,lastFile);if(lastFile){closeProgress()}if(multi){if(++ix<files.length){upload(files,ix)}}};formData.append("file",file,file.name);xhr.send(formData)}upload(files,0)}if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function assign(d,g){if(d==null){throw new TypeError("Cannot convert undefined or null to object")}var f=Object(d);for(var c=1;c<arguments.length;c++){var b=arguments[c];if(b!=null){for(var a in b){if(Object.prototype.hasOwnProperty.call(b,a)){f[a]=b[a]}}}}return f},writable:true,configurable:true})}Ext.define("FileDropper",{extend:"Ext.plugin.Abstract",alias:"plugin.filedropper",overCls:"",fileElement:"",init:function(a){this.target=a;a.on({element:"el",scope:this,dragover:this.onDragOver,dragenter:this.onDragEnter,dragLeave:this.onDragLeave,drop:this.onDrop})},onDragOver:function(a){a.stopEvent()},onDragEnter:function(a){this.target[this.fileElement].addCls(this.overCls);a.stopEvent()},onDragLeave:function(){this.target[this.fileElement].removeCls(this.overCls)},onDrop:function(b){var c=this.callback,a=this.scope||this;b.stopEvent();this.target[this.fileElement].removeCls(this.overCls);if(c){c.call(a,b.browserEvent.dataTransfer.files)}}});